<div class="event-item" *ngIf="event">
    <div class="head">
      <div class="head-text-area">
          <div class="title-xs head-text">{{event.name}}</div>
          <div *ngIf="event.fromDateTime" class="text-xs dt-row">
              <img src="/assets/svg/clock.svg">
              {{getDisplayDateTimeRange(event)}}
          </div>
          <div *ngIf="event.addressId" class="text-xs addr-row">
              <img src="/assets/svg/map-marker.svg">
              {{event.address?.formattedAddress}}
          </div>
      </div>
      <img class="qrcode" [src]="qrcodeUrl" (click)="openQrCodeDlg(qrcodeModal)"/>
    </div>

    <div class="body">
      <div class="text-sm">{{event.description}}</div>
  
      <div class="row participants-row">
        <div class="participants">
          <div *ngFor="let p of event.participants" class="participant">
            <span class="portrait-frame" *ngIf="p.status === 'joined'">
              <img class="portrait" [src]="getPaticipantPortrait(p)" />
            </span>
          </div>
        </div>
        <div class="text-sm num-going">
          {{getNumOfGoing(event)}}&nbsp;<span i18n="@@PeopleAreGoing">people are going</span>
        </div>
      </div>
      <div class="btn-holder" *ngIf="!isPast(event)">
        <div class="btn btn-primary btn-xs pull-right" *ngIf="!joined(event)" (click)="join(event)" i18n="@@Join">Join</div>
        <div class="btn btn-primary btn-xs pull-right" *ngIf="joined(event)" (click)="quit(event)" i18n="@@Cancel">Cancel</div>
      </div>
      <app-comment-form [event]="event" [author]="account" (afterPost)="onAfterPostComment($event)"></app-comment-form>

      <app-comment-list [comments]="comments" [account]="account"></app-comment-list>
    </div>

  </div>

  <ng-template #qrcodeModal let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h4 class="modal-title" i18n="@@QRCode">QR Code</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <img class="qrcode-lg" [src]="qrcodeUrl" />
      </div>
      <!-- <div class="modal-footer">
        <button type="button" class="btn btn-xs btn-secondary pull-left" (click)="d('Cross click')" i18n="@@Cancel">Cancel</button>
        <button type="button" class="btn btn-xs btn-primary pull-right" (click)="c('Save click');confirmed()" i18n="@@Submit">Submit</button>
      </div> -->
    </ng-template>